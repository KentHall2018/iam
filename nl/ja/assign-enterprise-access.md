---

copyright:

  years: 2019

lastupdated: "2019-07-24"

keywords: enterprise policy, enterprise access, assign enterprise access, enterprise service

subcollection: iam

---

{:shortdesc: .shortdesc}
{:codeblock: .codeblock}
{:screen: .screen}
{:new_window: target="_blank"}
{:tip: .tip}
{:note: .note}
{:external: target="_blank" .external}

# エンタープライズのアクセス権限の割り当て
{: #assign-access-enterprise}

{{site.data.keyword.Bluemix}} エンタープライズを管理するためのアクセス権限をユーザーに割り当てるには、ユーザーをエンタープライズ・アカウントに招待し、エンタープライズ・アカウント管理サービスに対するアクセス権限を割り当てる必要があります。
{:shortdesc}

[エンタープライズ](/docs/account?topic=account-enterprise)を管理するためのアクセス権限には、エンタープライズ・アカウント内のアクセス・ポリシーが必要です。エンタープライズ内の子アカウント内のエンタープライズ・アカウント管理サービス・ポリシーをユーザーに割り当てた場合、ユーザーはそのアカウントが属しているエンタープライズを管理することはできません。エンタープライズ・アカウント内のエンタープライズ・アカウント管理サービスに対してユーザーに割り当てられた役割に応じて、ユーザーは以下の特定のアクションを実行できます。

* エンタープライズ内の新規アカウントの作成
* アカウント・グループの作成および命名
* アカウント・グループ間でのアカウントの移動
* エンタープライズへの既存アカウントのインポート
* エンタープライズの名前またはドメインの更新
* エンタープライズ、特定のアカウント・グループとその中のアカウント・グループまたはその中のアカウント、または特定のアカウントについての、使用量レポートの表示

エンタープライズ・サービスへのアクセス権限をユーザーに付与するポリシーは、エンタープライズ全体で割り当てることも、特定のアカウント・グループまたは単一アカウントのみで割り当てることもできます。
{: tip}

通常、エンタープライズ・アカウント自体には多くのリソースは含まれません。代わりに、エンタープライズの子アカウント内にリソースが作成されます。ユーザーを招待して、リソースを管理および処理するためのアクセス権限をユーザーに付与できるのは、これらのアカウント内です。エンタープライズ・アカウント内でユーザーが持つアクセス権限およびメンバーシップは、エンタープライズ階層内のアカウント・グループおよび子アカウントには適用されません。ユーザー管理およびアクセス権限管理は、以下の図に示されているように、各アカウントに分離されたままです。

最初の図は、エンタープライズ・アカウント内のユーザーに、エンタープライズ全体を管理するためのポリシー、または、あるアカウント・グループを適用範囲とするポリシー (つまり、そのアカウント・グループまたはそのグループ内に編成された他のアカウント・グループまたは子アカウントのみを管理するためのアクセス権限を付与するポリシー) を割り当てる方法を示しています。

![エンタープライズのアクセス権限](images/enterprise-access.svg "エンタープライズ・ユーザーがエンタープライズ・エンティティーのみを管理するためのアクセス権限を持っていることを示す図。")

ポリシーのターゲットと役割は、アクセス権限の有効範囲を決定する上で重要です。ポリシーのサブジェクトである、エンタープライズ内のユーザー、サービス ID、またはアクセス・グループは、エンタープライズ全体で、1 つのアカウント・グループ (他のアカウント・グループおよびアカウントを含んでいる場合あり) で、または、単一のアカウントででも、エンタープライズ管理タスクを実行できます。例えば、エンタープライズ・アカウント内のユーザーに、有効範囲として特定のアカウント・グループをターゲットにした、エンタープライズ・アカウント管理サービスに対するアクセス・ポリシーを割り当てると、ユーザーはそのアカウント・グループ内でタスクを実行するためのアクセス権限を持ちます。ターゲットが特定のアカウント・グループまたはアカウントに設定されている場合、ユーザーはエンタープライズ全体に影響するアクション (エンタープライズ名やドメインの更新など) を実行できません。

エンタープライズ内の子アカウント内のユーザーには、そのアカウントまたはそこに含まれるリソースのみの管理に適用されるアクセス・ポリシーを割り当てることができます。例えば、子アカウント内のユーザーに、エンタープライズ・アカウント管理サービスに対する役割が割り当てられた場合、そのユーザーはエンタープライズ・アカウント・レベルのアクションを実行することはできません。ユーザーをエンタープライズ・アカウントに追加し、そのコンテキストでポリシーを割り当てる必要があります。

![アカウントのアクセス権限](images/account-access.svg "子アカウントのユーザーはそのアカウント内のみでアクセス権限を持ち、エンタープライズの残りの部分へのアクセス権限を持たないことを示す図。")

## 特定のジョブに必要なポリシー
{: #sample-enterprise-policies}

実行する必要があるジョブによっては、エンタープライズ所有者ではないユーザーのために複数のアクセス・ポリシーを組み合わせることが必要な場合があります。以下の例は、特定のタスクを実行できるようにエンタープライズ内のユーザーに割り当てる必要があるアクセス・ポリシーのセットを示しています。

エンタープライズに属していないアカウントの所有者は、そのアカウント内の別のユーザーがアカウントからエンタープライズに変換できるようにしたい場合、そのユーザーに請求アカウント管理サービスに対する管理者役割を割り当てることができます。
{: note}

### エンタープライズ内の使用量表示および請求管理
{: #billing-admin-enterprise}

ユーザーがエンタープライズ内のすべてのアカウントの[使用量レポートの表示](/docs/billing-usage?topic=billing-usage-enterprise-usage)、支払いの実施、および請求書の表示を行うには、以下のすべてのアクセス・ポリシーが割り当てられる必要があります。

* エンタープライズ・アカウント内のエンタープライズ・アカウント管理サービスに対する使用量レポート・ビューアー役割
* エンタープライズ・アカウント内の請求アカウント管理サービスに対する管理者役割

### エンタープライズへの既存アカウントのインポート
{: #add-account}

ユーザーが[エンタープライズへの既存 IBM Cloud アカウントのインポート](/docs/account?topic=account-enterprise-add#add-accounts)を行うには、以下のすべてのアクセス・ポリシーが割り当てられる必要があります。

* インポートするアカウント内の請求アカウント管理サービスに対する管理者役割
* アカウントが追加されるアカウント・グループまたはエンタープライズ・アカウントのエンタープライズ・アカウント管理サービスに対する管理者またはエディターの役割
* エンタープライズ・アカウントの請求アカウント管理サービスに対する管理者役割

### アカウントの移動
{: #move-accountgroup}

ユーザーが[エンタープライズ内でのアカウントの移動](/docs/account?topic=account-enterprise-organize#move-accounts)を行うには、以下のアクセス・ポリシーが割り当てられる必要があります。

* エンタープライズ・アカウント内の請求アカウント管理サービスに対する管理者役割

さらに、以下の 2 つのオプションのいずれか。

* エンタープライズ全体のエンタープライズ・アカウント管理サービスに対する管理者またはエディターの役割
* 現在のアカウント・グループおよびこのアカウントの移動先となるターゲットのアカウント・グループに対する管理者またはエディターの役割

各役割でユーザーが実行できるアクションについて詳しくは、『[アカウント管理サービスのアクションおよび役割](/docs/iam?topic=iam-account-services#account-management-actions-roles)』を参照してください。

## コンソールでのアクセス権限の割り当て
{: #enterprise-access-console}

エンタープライズ・アカウント内の既存のユーザーにアクセス・ポリシーを割り当てるには、以下のステップを実行します。

ポリシーのターゲットは、エンタープライズ全体、または特定のアカウント・グループ (その中のすべてのアカウントへのアクセス権限を含む) に設定することができ、アカウント・グループ内の特定のアカウントに設定することもできます。
{: tip}

1. メニュー・バーから、**「管理」** &gt; **「アクセス (IAM)」**をクリックして、**「ユーザー」**を選択します。
2. アクセス権限を割り当てるユーザーの行から**「アクション」** ![「アクションのリスト」アイコン](../icons/action-menu-icon.svg)メニューを選択し、**「アクセス権限の割り当て」**をクリックします。
3. **「アカウント管理サービス」**へのアクセス権限を割り当てることを選択します。
4. サービスとして**「エンタープライズ」**を選択します。
5. オプション: ポリシーの有効範囲をエンタープライズ、アカウント・グループ、またはアカウントに設定します。
6. 必要なアクセス権限を割り当てるための役割の組み合わせを選択します。

| 役割 | アクション |
|:-------|----------|
| ビューアー | エンタープライズ、アカウント・グループ、およびアカウントの表示 |
| オペレーター | エンタープライズ、アカウント・グループ、およびアカウントの表示 |
| エディター | エンタープライズの表示、名前およびドメインの編集によるエンタープライズの更新、アカウントおよびアカウント・グループの作成、使用量レポートの表示、およびアカウントのインポート |
| 管理者 | エンタープライズの表示、名前およびドメインの編集によるエンタープライズの更新、アカウントおよびアカウント・グループの作成、アカウント・グループ間でのアカウントの移動、既存アカウントのインポート、および使用量レポートの表示  |
| 使用量レポート・ビューアー | エンタープライズ、アカウント、およびアカウント・グループの表示、エンタープライズ内のすべてのアカウントの使用量レポートの表示 |
{: caption="表 1. エンタープライズ・アカウント管理サービスの役割とアクション例" caption-side="top"}

## CLI を使用したアクセス権限の割り当て
{: #enterprise-cli-policy}

ユーザー用の新規アクセス・ポリシーを作成するには、**`ibmcloud iam user-policy-create`** コマンドを実行します。次のコマンド例では、ポリシー詳細を指定するために JSON ファイルが使用されています。JSON ファイルに含める内容の例については、『[API を使用したアクセス権限の割り当て](#enterprise-api-policy)』セクションの例を参照してください。

ユーザー・ポリシーを作成します。
```
$ ibmcloud iam user-policy-create name@example.com -f policy.json
```

詳しくは、『[ibmcloud iam user-policy-create](/docs/cli/reference/ibmcloud?topic=cloud-cli-ibmcloud_commands_iam#ibmcloud_iam_user_policy_create)』を参照してください。

## API を使用したアクセス権限の割り当て
{: #enterprise-api-policy}

以下の要求例は、有効範囲がアカウント・グループに設定され、エンタープライズ・アカウント内のエンタープライズ・サービスに対するエディター役割が設定された、ユーザー用のポリシーを割り当てます。このタイプのポリシーは階層型であり、階層内のすべての下位オブジェクト (つまり、指定されたターゲット・アカウント・グループ内のすべてのアカウント・グループまたはアカウント) に適用されます。  

```
curl -X POST \
'https://iam.cloud.ibm.com/v1/policies' \
-H 'Authorization: $TOKEN' \
-H 'Content-Type: application/json' \
-d '{
  "type": "access",
  "subjects": [
    {
      "attributes": [
        {
          "name": "iam_id",
          "value": "<IBMid-example>"
        }
      ]
    }
  ],
  "roles":[
    {
      "role_id": "crn:v1:bluemix:public:iam::::role:Editor"
    }
  ],
  "resources":[
    {
      "attributes": [
        {
          "name": "accountId",
          "value": "<account-id-example>"
        },
        {
          "name": "serviceName",
          "value": "enterprise"
        },
        {
          "name": "accountGroupId",
          "value": "<accountGroupId-example>"
        }
      ]
    }
  ]
}'
```
{: codeblock}

詳しくは、『[ポリシーの作成](https://cloud.ibm.com/apidocs/iam-policy-management#create-a-policy){: external}』を参照してください。
