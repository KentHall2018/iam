---

copyright:

  years: 2018, 2019

lastupdated: "2019-01-30"

keywords: dynamic rules, access groups, specific identity attributes

subcollection: iam

---

{:shortdesc: .shortdesc}
{:codeblock: .codeblock}
{:screen: .screen}
{:new_window: target="_blank"}
{:tip: .tip}
{:note: .note}

# アクセス・グループの動的ルールの作成
{: #rules}

動的ルールを作成して、特定の ID 属性に基づいてフェデレーテッド・ユーザーをアクセス・グループに自動的に追加することができます。 ユーザーがフェデレーテッド ID を使用してログインすると、ID プロバイダーからのデータは、設定されたルールに基づいてユーザーをアクセス・グループに動的にマップします。
{:shortdesc}

ユーザーは、会社のドメイン内に特定の ID 情報を既に持っており、フェデレーテッド ID を使用してログインすると、SAML アサーションを使用してこのデータを渡すことができます。 ID プロバイダー内で構成されている SAML アサーションまたは属性ステートメントは、各ルールの作成に使用されるデータを提供します。 例えば、ユーザーを管理者として定義する、true または false の属性ステートメントが存在する場合があります。 この情報を使用して、{{site.data.keyword.Bluemix_notm}} アカウントで作成した管理者の特定のアクセス・グループに、管理者であるすべてのユーザーを追加できます。 詳しくは、[ルールの例](/docs/iam?topic=iam-rules#example)を参照してください。

動的ルールを使用してアクセス・グループにマップすることができるのは、アカウントに既に招待されているユーザーのみです。
{: note}

## ルールの設定
{: #setup_rules}

動的ルールは、ID プロバイダー内で構成され、ログイン時にユーザーのフェデレーテッド ID と共に渡されるデータに一致する必要がある条件を設定することによって作成されます。 ルールを作成するには、以下の手順を実行します。

1. メニュー・バーから、**「管理」** &gt; **「アクセス (IAM)」**をクリックして、**「アクセス・グループ」**を選択します。
2. ルールを作成するアクセス・グループの名前を選択し、グループ詳細ページを開きます。
3. **「動的ルール」**タブを選択します。
4. **「ルールの追加」**をクリックします。
5. ID プロバイダーからの情報を入力します。 次のリストは、各必須フィールドの詳細を示しています。

<dl>
<dt>名前</dt>
<dd>ルールのカスタム名を入力します。カスタム名は、アクセス・グループに追加するユーザーのタイプが分かるような名前にします。</dd>
<dt>ID プロバイダー</dt>
<dd>ID プロバイダーの URI を入力します。 これはSAML の「entityId」フィールドで、IBMid を使用するフェデレーション構成に含まれる ID プロバイダーの場合は発行者 ID と呼ばれることがあります。</dd>
<dt>有効期限 (時間)</dt>
<dd>このオプションを使用して、割り当てられたアクセス権限に制限時間を設定することにより、セキュリティーを強化できます。 各ユーザーは、24 時間ごとにログインしてアクセス権限を更新する必要がありますが、アクセス権限を 1 時間以内に期限切れするように設定することもできます。 この時間が経過すると、グループ・メンバーシップは取り消されます。</dd>
<dt>ユーザーを追加する条件</dt>
<dd>このフィールドには、属性ステートメント名を入力する必要があります。 この値は、ID プロバイダーに固有です。</dd>
<dt>比較演算子</dt>
<dd>「等しい」、「等しくない」、「等しい (大/小文字を無視)」、「等しくない (大/小文字を無視)」、「中にある」、「含む」のいずれかを選択できます。 属性ステートメントに配列型がある場合は、「含む」オプションを使用します。 また、「中にある」オプションを使用して、一致させる複数の値を入力することもできます。</dd>
<dt>値</dt>
<dd>ルールの比較対象となる属性ステートメントの属性値を入力します。</dd>
</dl>

ルールには複数の条件を追加できます。 ユーザーがアクセス・グループに追加されるためには、ルールに設定されているすべての条件を満たしている必要があります。
{: tip}

## ルールの例
{: #example}

以下に、**「ルールの追加」**ページの各フィールドの例を示します。 このルールでは、フェデレーテッド ID プロバイダー内の管理者として識別されるユーザーは、管理者のみに与えられる特定のアクセス権限セットを持つ {{site.data.keyword.Bluemix_notm}} アクセス・グループにマップされます。

| フィールド | 値 |
|----------|---------|
| 名前 | 管理者グループのルール |
| ID プロバイダー | `https://idp.example.org/SAML2` |
| 有効期限 (時間) | 12 |
| ユーザーを追加する条件 (属性名) | isManager |
| 比較演算子 | 等しい  |
| 値 |  true |
{: caption="表 1. アクセス・グループの動的ルールの例" caption-side="top"}
