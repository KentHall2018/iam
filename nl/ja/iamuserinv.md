---

copyright:

  years: 2015, 2019

lastupdated: "2019-08-08"

keywords: invite, invite users, invitation access, vpn-only user

subcollection: iam

---

{:shortdesc: .shortdesc}
{:codeblock: .codeblock}
{:screen: .screen}
{:new_window: target="_blank"}
{:tip: .tip}
{:note: .note}
{:external: target="_blank" .external}

# アカウントへのユーザーの招待
{: #iamuserinv}

{{site.data.keyword.Bluemix}} の ID およびアクセス管理 (IAM) を使用して、ユーザーの招待、招待のキャンセル、および招待されるユーザーへの保留中の招待の再送を行います。 さらに、単一のユーザーを招待することも、一度に複数のユーザーを招待することも可能です。
{:shortdesc}

ユーザーの招待、および未処理の招待の管理を行うには、アカウント所有者、組織管理者、または、IAM アクセス・ポリシーでユーザー管理サービスに対するエディター以上の役割が付与されたユーザーであるか、あるいは、ユーザーを追加するためのクラシック・インフラストラクチャー許可を持っている必要があります。

## 招待のセットアップ
{: #invitations}

アカウントでユーザーを招待したりユーザーの招待を管理したりするには、以下の手順を実行します。

1. メニュー・バーから、**「管理」** &gt; **「アクセス (IAM)」**をクリックして、**「ユーザー」**を選択します。
2. **「ユーザーの招待」**をクリックします。
3. ユーザーの E メール・アドレスを指定します。 1 つの招待で複数のユーザーを招待すると、すべてのユーザーに同じアクセス権限が割り当てられます。
4. 管理する 1 つ以上のアクセス・オプションを追加します。 少なくとも 1 つのアクセス・オプションを割り当ててください。 追加して構成しないその他のアクセス・オプションには、デフォルト値の **no access** が割り当てられます。 管理権限があるオプションに応じて、以下のアクセス・オプションの 1 つまたはすべてが表示されます。

  * **サービス**
  * **Cloud Foundry アクセス権限**
  * **クラシック・インフラストラクチャー・アクセス権限**.

  詳しくは、[ユーザー・アクセスの割り当て](/docs/iam?topic=iam-iamuserinv#assignaccess)を参照してください。

ユーザーのアクセス権限は必要ないと判断した場合は、「状況」列に「処理中」または「保留中」の状態と表示されているユーザーの招待を取り消すことができます。 招待されたユーザーが招待を受け取らなかった場合、「保留中」状態のユーザーに招待を再送することができます。

### CLI を使用したユーザーの招待
{: #cli-invite}

コマンド・ライン・インターフェース (CLI) を使用してユーザーを招待するには、以下のコマンドを実行します。

```
ibmcloud account user-invite USER_EMAIL [-o ORG [--org-role ORG_ROLE] [-s SPACE, --space-role SPACE_ROLE]]
```

CLI を使用して、Cloud Foundry アクセス権限を割り当てるか、または、アクセス権限を何も割り当てずに後で割り当て処理を行うことを選択できます。 コマンド・パラメーターの詳細については、『[**`ibmcloud account user-invite`**](/docs/cli/reference/ibmcloud?topic=cloud-cli-ibmcloud_commands_account#ibmcloud_account_user_invite)』を参照してください。 

### API を使用したユーザーの招待
{: #api-invite}

[API](https://cloud.ibm.com/apidocs/user-management#invite-users){: external} を使用して、ユーザーを一括で招待できます。 単一の招待に含まれるすべてのユーザーに同じアクセス権限が割り当てられます。 API を使用してユーザーを招待するときには、以下の例のように、各項目を引用符で囲んだコンマ区切りリストで E メールを入力します。


```
curl -X POST \
  https://user-management.cloud.ibm.com/v2/accounts/987d4cfd77b04e9b9e1a6asdcc861234/users \
  -H 'Authorization: Bearer <IAM_TOKEN>'
  -H 'Content-Type: application/json' \
    -d '{
      "users": [
      {
        "email": "cloud_api_example_member@ibm.com", "second_user@ibm.com", "third_user@ibm.com",
        "account_role": "Member"
      }],
      "iam_policy": [
      {
        "roles": [
        {
          "id": "crn:v1:bluemix:public:iam::::role:Viewer"
        }],
        "resources": [
        {
          "accountId": "111d4cfd77b04e9b9e1a6asdcc861234",
          "resourceType": "resource-group",
          "resource": "111449dd871049c29ec3a53853ce123e"
        }]
      }]
    }'
```
{: codeblock}

## 招待からのユーザーへのアクセス権限の割り当て
{: #assignaccess}

ユーザーを招待する際に {{site.data.keyword.Bluemix}} IAM ポリシー、Cloud Foundry アクセス権限、およびクラシック・インフラストラクチャーの許可を割り当てることにより、ユーザーに対しアクセス権限を割り当てます。 管理権限があるアクセス・オプションに応じて、ユーザーを招待して、アカウント、リソース・グループ、組織、スペース、サービス・インスタンス、およびクラシック・インフラストラクチャーにわたってアクセス権限を付与することができます。 以下のセクションでは、招待したユーザーに割り当てることができる 3 つのタイプのアクセス権限について説明します。

### サービス
{: #invite_services}

新規ユーザーを招待する際に、初期の {{site.data.keyword.Bluemix_notm}} IAM アクセス・ポリシーを作成して、アクセス権限を割り当てることができます。 「サービス」セクションでは、ユーザーにアカウント管理サービスへのアクセス権限を付与したり、リソース・グループを管理するためのアクセス権限と共にリソース・グループ内のサービスへのアクセス権限を付与したり、アカウント内の個別リソースへのアクセス権限を付与したりできます。

ユーザーが招待を受け入れた後、さらにアクセス権限を割り当てることができます。 役割を追加するためのポリシーの編集、アクセス権限の追加の割り当て、またはユーザーのポリシーの削除について詳しくは、[リソースに対するアクセス権限の管理](/docs/iam?topic=iam-iammanidaccser#iammanidaccser)を参照してください。

ポリシーを割り当てる際にどのサービスを選択するかに応じて、以下の手順で説明するフィールドの一部が表示されない可能性があります。
{: note}

#### アカウント管理サービスのアクセス権限
{: #invite_acct_mgmt}

アカウント所有者としての業務の一部を委任するために、アカウント管理サービスへのアクセス権限をユーザーに付与できます。 例えば、請求と使用量の表示、ユーザーの招待と削除、アクセス・グループの管理、およびサービス ID の管理の機能を委任できます。 すべてのアカウント管理サービスへのアクセス権限を付与することも、1 つのアカウント管理サービスのみへのアクセス権限を付与することもできます。

1. 「ユーザーの招待」ページで「サービス」セクションを展開します。
2. **「アクセス権限の割り当て」**リストから**「アカウント管理サービス」**を選択します。 
3. **「すべてのアカウント管理サービス」**を選択するか、特定のアカウント管理サービスを選択します。
4. 必要なアクセス権限を割り当てるための役割の組み合わせを選択します。

#### リソース・グループのアクセス権限
{: #invite_rgs}

リソース・グループ内のすべてのサービス、またはリソース・グループ内の 1 つのサービス・タイプへのアクセス権限を割り当てることができます。

1. 「ユーザーの招待」ページで「サービス」セクションを展開します。
2. **「アクセス権限の割り当て」**リストから**「リソース・グループ」**を選択します。
3. リソース・グループを選択します。
4. ユーザーがリソース・リストでのリソース・グループの表示、リソース・グループ名の編集、またはグループへのユーザー・アクセスの管理を行えるようするため、**「リソース・グループへのアクセス権限の割り当て」**リストから役割を選択します。 指定したリソースが所属するグループではなく、指定したリソースにのみユーザーがアクセスできるようにしたい場合には、**「アクセス権限なし」**を選択できます。
5. リソース・グループ内のいずれかのサービスを選択するか、または、選択したグループ内のすべてのサービスへのアクセス権限を提供することを選択します。
6. 必要なアクセス権限を割り当てるための役割の組み合わせを選択します。 このアクセス権限は、ポリシーに選択したリソースにのみ適用されます。 リソース・グループである実際のコンテナーへのアクセス権限は付与されません。

#### リソースのアクセス権限
{: #invite_resources}

インスタンスに至るまで、アカウント内の単一リソースへのアクセス権限を割り当てることができます。

1. 「ユーザーの招待」ページで「サービス」セクションを展開します。
2. **「アクセス権限の割り当て」**リストから**「リソース」**を選択します。 
3. サービスを選択します。
4. プロンプトが出されたら、**「すべての現行地域」**、または特定の地域を選択します。
5. **「すべての現行サービス・インスタンス」**を選択するか、特定のサービス・インスタンスを選択します。
6. 選択したサービスに応じて、以下のフィールドが表示される場合があります。 これらのフィールドの値を入力しないと、ポリシーの割り当ては、バケット・レベルではなく、サービス・インスタンス・レベルで行われます。
    * **リソース・タイプ**: `「バケット」` を入力します。
    * **リソース ID**: バケットの名前を入力します。
7. 必要なアクセス権限を割り当てるための役割の組み合わせを選択します。

アクセス権限を割り当てる際に使用される役割について詳しくは、『[IAM アクセス権限](/docs/iam?topic=iam-userroles#iamusermanrol)』を参照してください。

### Cloud Foundry アクセス権限
{: #invite_cf}

新規ユーザーを招待する際、そのユーザーをアカウント内の組織に追加することを選択できます。 ユーザーを組織に追加する場合、そのユーザーに組織の役割を割り当てることができます。 次に、招待したユーザーに、割り当てられたスペースの役割によって、選択した組織内のいずれかのスペースまたはすべてのスペースへのアクセス権限を付与することを選択します。

1. 「ユーザーの招待」ページで「Cloud Foundry アクセス権限」セクションを展開します。
2. ユーザーの追加先の組織を選択します。
3. 組織の役割を選択して、選択した組織へのアクセス・レベルを定義します。
4. オプション: **「組織の役割の追加」**をクリックして、追加の役割を指定します。
5. **「すべての現行地域」**または特定の地域を選択します。
6. **「すべての現行スペース」**または特定のスペースを選択します。
7. スペースの役割を選択して、選択したスペースへのアクセス・レベルを定義します。
8. オプション: **「スペースの役割の追加」**をクリックして、追加の役割を指定します。

アクセス権限を割り当てる際に使用される役割について詳しくは、『[Cloud Foundry の役割](/docs/iam?topic=iam-cfaccess#cfroles)』を参照してください。

Cloud Foundry の役割を追加するには、[**`ibmcloud account user-invite`**](/docs/cli/reference/ibmcloud?topic=cloud-cli-ibmcloud_commands_account#ibmcloud_account_user_invite)CLI コマンドを使用できますが、他のアクセス権限または許可を割り当てるにはコンソールを使用する必要があります。
{: tip}

### クラシック・インフラストラクチャー・アクセス権限
{: #invite_classicinfra}

割り当てられる許可は、招待側が所有する許可のサブセットに自動的に制限されます。 招待側は招待したユーザーの親ユーザーになります。

1. 「ユーザーの招待」ページで「クラシック・インフラストラクチャー・アクセス権限」セクションを展開します。
2. 事前定義された一括許可を割り当てる許可セットを選択します。

デバイスへのアクセス権限は、ユーザーの追加後に別個に付与されます。 コンソールで、ユーザーの**「クラシック・インフラストラクチャー」**アクセス権限オプションに移動します。
{: note}

アカウントに追加された後のユーザーのアクセス権限の構成については、[クラシック・インフラストラクチャー・アクセス権限の管理](/docs/iam?topic=iam-mngclassicinfra#mngclassicinfra)を参照してください。

## VPN 専用ユーザーの追加
{: #add-vpn-only}

アカウント所有者、または「ユーザーの管理」クラシック・インフラストラクチャー許可を持つユーザーは、VPN 専用ユーザーを追加できます。

1. 「ユーザー」ページで、**「VPN 専用ユーザーの追加」**をクリックします。
2. ユーザーの個人情報の詳細を入力します。
3. **「保存」**をクリックします。
