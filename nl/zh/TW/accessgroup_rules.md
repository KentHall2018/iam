---

copyright:

  years: 2018, 2019

lastupdated: "2019-01-30"

keywords: dynamic rules, access groups, specific identity attributes

subcollection: iam

---

{:shortdesc: .shortdesc}
{:codeblock: .codeblock}
{:screen: .screen}
{:new_window: target="_blank"}
{:tip: .tip}
{:note: .note}

# 建立存取群組的動態規則
{: #rules}

您可以建立動態規則，以根據特定的身分屬性，自動將聯合使用者新增至存取群組。當您的使用者使用聯合 ID 登入時，來自身分提供者的資料會根據您設定的規則，動態地將使用者對映到存取群組。
{:shortdesc}

使用者已有貴公司網域內特定的身分資訊，當他們使用聯合 ID 登入時，可以使用 SAML 主張來傳遞此資料。身分提供者內配置的 SAML 主張或屬性陳述式，會提供用來建立每個規則的資料。例如，可能會有 true 或 false 屬性陳述式，將使用者定義為管理員。此資訊可以用來將身為管理員的所有使用者都新增至特定的管理員存取群組，此群組是您在 {{site.data.keyword.Bluemix_notm}} 帳戶中所建立。如需相關資訊，請參閱[範例規則](/docs/iam?topic=iam-rules#example)。

只有已受邀加入帳戶的使用者才能使用動態規則對映至存取群組。
{: note}

## 設定規則
{: #setup_rules}

動態規則的建立，是藉由設定身分提供者內配置資料必須符合的條件，而這些資料會以使用者的聯合 ID 傳入。若要建立規則，請遵循下列步驟：

1. 從功能表列按一下**管理** &gt; **存取 (IAM)**，然後選取**存取群組**。
2. 選取您要為其建立規則的存取群組名稱，以開啟群組詳細資料頁面。
3. 選取**動態規則**標籤。
4. 按一下**新增規則**。
5. 輸入來自您身分提供者的資訊。下列清單提供每個必要欄位的詳細資料。

<dl>
<dt>名稱</dt>
<dd>輸入規則的自訂名稱，以協助您記住您新增至存取群組的是什麼類型的使用者。</dd>
<dt>身分提供者</dt>
<dd>輸入您身分提供者的 URI。這是身分提供者的 SAML "entityId" 欄位，有時稱為發證者 ID，作為使用 IBM ID 上線的聯合配置一部分。</dd>
<dt>有效期限（小時）</dt>
<dd>您可以使用這個選項，藉由設定所指派存取權的時間限制，來提供額外的安全。每個使用者必須每 24 小時登入一次以重新整理存取權，但您可以將存取權設定為短到一小時的時間內就到期。在此時段到期之後，會撤銷群組成員資格。</dd>
<dt>新增使用者，當：</dt>
<dd>必須在此欄位輸入屬性陳述式名稱。這個值是您的身分提供者所特有。</dd>
<dt>比較運算子</dt>
<dd>您可以從「等於」、「不等於」、「等於不區分大小寫」、「不等於不區分大小寫」、「位於」及「包含」進行選擇。當屬性陳述式具有陣列類型時，請使用「包含」選項。此外，您可以使用「位於」選項，輸入要符合的多個值。</dd>
<dt>值</dt>
<dd>輸入規則比較針對的屬性陳述式的屬性值。</dd>
</dl>

您可以為一個規則新增多個條件。規則中設定的所有條件都必須符合，使用者才會新增至存取群組。
{: tip}

## 範例規則
{: #example}

下列範例包含**新增規則**頁面上每個欄位的值。在此規則中，在聯合身分提供者內識別為管理員的使用者，會對映到只針對管理員設定特定存取權的 {{site.data.keyword.Bluemix_notm}} 存取群組。

|欄位|值|
|----------|---------|
| 名稱 |管理員群組規則|
|身分提供者| `https://idp.example.org/SAML2` |
|有效期限（小時）| 12 |
|新增使用者，當：（屬性名稱）| isManager |
|比較運算子|等於|
|值|true|
{: caption="表 1. 存取群組的範例動態規則" caption-side="top"}
